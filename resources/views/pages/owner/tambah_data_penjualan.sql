-- Data Dummy Penjualan untuk Testing Laporan
-- Menambahkan transaksi dari berbagai periode untuk testing

-- Pastikan ada user kasir terlebih dahulu
INSERT IGNORE INTO users (id, name, username, email, password, role, created_at, updated_at) VALUES
(2, 'Kasir 1', 'kasir1', 'kasir1@warung.tm', '$2y$12$LQv3c/P0H.E..N/N5pKZUOjzj1GyM2DKkztKzOKzxnGb4kG0m5TnG', 'kasir', NOW(), NOW()),
(3, 'Kasir 2', 'kasir2', 'kasir2@warung.tm', '$2y$12$LQv3c/P0H.E..N/N5pKZUOjzj1GyM2DKkztKzOKzxnGb4kG0m5TnG', 'kasir', NOW(), NOW());

-- Menambahkan data menu jika belum ada
INSERT IGNORE INTO menus (id, name, description, price, category, stock, is_available, created_at, updated_at) VALUES
(1, 'Nasi Gudeg', 'Nasi gudeg tradisional dengan ayam', 25000, 'Makanan', 50, 1, NOW(), NOW()),
(2, 'Soto Ayam', 'Soto ayam kuah bening dengan nasi', 20000, 'Makanan', 30, 1, NOW(), NOW()),
(3, 'Gado-Gado', 'Gado-gado dengan bumbu kacang', 18000, 'Makanan', 25, 1, NOW(), NOW()),
(4, 'Bakso Malang', 'Bakso dengan mie dan pangsit', 22000, 'Makanan', 20, 1, NOW(), NOW()),
(5, 'Es Teh Manis', 'Es teh manis segar', 5000, 'Minuman', 100, 1, NOW(), NOW()),
(6, 'Es Jeruk', 'Es jeruk segar', 8000, 'Minuman', 80, 1, NOW(), NOW()),
(7, 'Kopi Hitam', 'Kopi hitam panas', 10000, 'Minuman', 60, 1, NOW(), NOW()),
(8, 'Jus Alpukat', 'Jus alpukat segar', 15000, 'Minuman', 40, 1, NOW(), NOW()),
(9, 'Kerupuk', 'Kerupuk udang', 3000, 'Snack', 200, 1, NOW(), NOW()),
(10, 'Gorengan', 'Gorengan campur', 12000, 'Snack', 50, 1, NOW(), NOW());

-- Data transaksi untuk bulan ini (November 2025)
-- Transaksi hari ini
INSERT INTO transactions (user_id, transaction_code, total_amount, total_items, paid_amount, change_amount, payment_method, status, notes, created_at, updated_at) VALUES
-- Hari ini (19 November 2025)
(2, 'TRX-20251119001', 43000, 3, 50000, 7000, 'cash', 'completed', 'Pelanggan reguler', '2025-11-19 08:30:00', '2025-11-19 08:30:00'),
(3, 'TRX-20251119002', 28000, 2, 30000, 2000, 'digital', 'completed', NULL, '2025-11-19 09:15:00', '2025-11-19 09:15:00'),
(2, 'TRX-20251119003', 35000, 3, 35000, 0, 'card', 'completed', NULL, '2025-11-19 10:45:00', '2025-11-19 10:45:00'),
(3, 'TRX-20251119004', 52000, 2, 55000, 3000, 'cash', 'completed', 'Pesanan keluarga', '2025-11-19 12:20:00', '2025-11-19 12:20:00'),
(2, 'TRX-20251119005', 18000, 2, 20000, 2000, 'cash', 'completed', NULL, '2025-11-19 13:30:00', '2025-11-19 13:30:00'),
(3, 'TRX-20251119006', 40000, 2, 50000, 10000, 'cash', 'completed', NULL, '2025-11-19 15:10:00', '2025-11-19 15:10:00'),

-- Kemarin (18 November 2025)
(2, 'TRX-20251118001', 38000, 2, 40000, 2000, 'cash', 'completed', NULL, '2025-11-18 08:15:00', '2025-11-18 08:15:00'),
(3, 'TRX-20251118002', 25000, 1, 25000, 0, 'digital', 'completed', NULL, '2025-11-18 09:30:00', '2025-11-18 09:30:00'),
(2, 'TRX-20251118003', 47000, 2, 50000, 3000, 'cash', 'completed', 'Makan siang kantor', '2025-11-18 11:45:00', '2025-11-18 11:45:00'),
(3, 'TRX-20251118004', 32000, 2, 35000, 3000, 'cash', 'completed', NULL, '2025-11-18 14:20:00', '2025-11-18 14:20:00'),
(2, 'TRX-20251118005', 28000, 2, 30000, 2000, 'cash', 'completed', NULL, '2025-11-18 16:10:00', '2025-11-18 16:10:00'),

-- Minggu lalu (11-17 November 2025)
(2, 'TRX-20251117001', 55000, 3, 60000, 5000, 'cash', 'completed', 'Acara keluarga', '2025-11-17 10:30:00', '2025-11-17 10:30:00'),
(3, 'TRX-20251117002', 33000, 2, 35000, 2000, 'cash', 'completed', NULL, '2025-11-17 13:15:00', '2025-11-17 13:15:00'),
(2, 'TRX-20251116001', 42000, 2, 50000, 8000, 'cash', 'completed', NULL, '2025-11-16 09:20:00', '2025-11-16 09:20:00'),
(3, 'TRX-20251116002', 27000, 2, 30000, 3000, 'cash', 'completed', NULL, '2025-11-16 14:40:00', '2025-11-16 14:40:00'),
(2, 'TRX-20251115001', 48000, 3, 50000, 2000, 'digital', 'completed', 'Pesanan takeaway', '2025-11-15 11:10:00', '2025-11-15 11:10:00'),
(3, 'TRX-20251115002', 36000, 2, 40000, 4000, 'cash', 'completed', NULL, '2025-11-15 15:30:00', '2025-11-15 15:30:00'),
(2, 'TRX-20251114001', 31000, 2, 35000, 4000, 'cash', 'completed', NULL, '2025-11-14 08:45:00', '2025-11-14 08:45:00'),
(3, 'TRX-20251114002', 44000, 2, 45000, 1000, 'card', 'completed', NULL, '2025-11-14 12:25:00', '2025-11-14 12:25:00'),
(2, 'TRX-20251113001', 39000, 2, 40000, 1000, 'cash', 'completed', NULL, '2025-11-13 10:15:00', '2025-11-13 10:15:00'),
(3, 'TRX-20251113002', 26000, 2, 30000, 4000, 'cash', 'completed', NULL, '2025-11-13 16:20:00', '2025-11-13 16:20:00'),
(2, 'TRX-20251112001', 50000, 3, 50000, 0, 'digital', 'completed', 'Rapat tim', '2025-11-12 13:40:00', '2025-11-12 13:40:00'),
(3, 'TRX-20251112002', 34000, 2, 35000, 1000, 'cash', 'completed', NULL, '2025-11-12 17:10:00', '2025-11-12 17:10:00'),
(2, 'TRX-20251111001', 45000, 2, 50000, 5000, 'cash', 'completed', NULL, '2025-11-11 09:30:00', '2025-11-11 09:30:00'),
(3, 'TRX-20251111002', 28000, 2, 30000, 2000, 'cash', 'completed', NULL, '2025-11-11 14:15:00', '2025-11-11 14:15:00'),

-- Awal bulan November (1-10 November 2025)
(2, 'TRX-20251110001', 37000, 2, 40000, 3000, 'cash', 'completed', NULL, '2025-11-10 11:20:00', '2025-11-10 11:20:00'),
(3, 'TRX-20251110002', 43000, 2, 45000, 2000, 'card', 'completed', NULL, '2025-11-10 15:45:00', '2025-11-10 15:45:00'),
(2, 'TRX-20251109001', 32000, 2, 35000, 3000, 'cash', 'completed', NULL, '2025-11-09 08:30:00', '2025-11-09 08:30:00'),
(3, 'TRX-20251109002', 49000, 3, 50000, 1000, 'digital', 'completed', 'Pesanan grup', '2025-11-09 12:15:00', '2025-11-09 12:15:00'),
(2, 'TRX-20251108001', 35000, 2, 40000, 5000, 'cash', 'completed', NULL, '2025-11-08 09:45:00', '2025-11-08 09:45:00'),
(3, 'TRX-20251108002', 41000, 2, 45000, 4000, 'cash', 'completed', NULL, '2025-11-08 13:30:00', '2025-11-08 13:30:00'),
(2, 'TRX-20251107001', 29000, 2, 30000, 1000, 'cash', 'completed', NULL, '2025-11-07 10:20:00', '2025-11-07 10:20:00'),
(3, 'TRX-20251107002', 46000, 2, 50000, 4000, 'cash', 'completed', NULL, '2025-11-07 16:40:00', '2025-11-07 16:40:00'),
(2, 'TRX-20251106001', 38000, 2, 40000, 2000, 'digital', 'completed', NULL, '2025-11-06 11:10:00', '2025-11-06 11:10:00'),
(3, 'TRX-20251106002', 33000, 2, 35000, 2000, 'cash', 'completed', NULL, '2025-11-06 14:25:00', '2025-11-06 14:25:00'),
(2, 'TRX-20251105001', 52000, 3, 55000, 3000, 'cash', 'completed', 'Pesanan besar', '2025-11-05 12:30:00', '2025-11-05 12:30:00'),
(3, 'TRX-20251105002', 27000, 2, 30000, 3000, 'cash', 'completed', NULL, '2025-11-05 17:15:00', '2025-11-05 17:15:00'),
(2, 'TRX-20251104001', 40000, 2, 40000, 0, 'card', 'completed', NULL, '2025-11-04 09:15:00', '2025-11-04 09:15:00'),
(3, 'TRX-20251104002', 44000, 2, 50000, 6000, 'cash', 'completed', NULL, '2025-11-04 13:45:00', '2025-11-04 13:45:00'),
(2, 'TRX-20251103001', 31000, 2, 35000, 4000, 'cash', 'completed', NULL, '2025-11-03 10:30:00', '2025-11-03 10:30:00'),
(3, 'TRX-20251103002', 47000, 2, 50000, 3000, 'digital', 'completed', NULL, '2025-11-03 15:20:00', '2025-11-03 15:20:00'),
(2, 'TRX-20251102001', 36000, 2, 40000, 4000, 'cash', 'completed', NULL, '2025-11-02 08:45:00', '2025-11-02 08:45:00'),
(3, 'TRX-20251102002', 42000, 2, 45000, 3000, 'cash', 'completed', NULL, '2025-11-02 12:10:00', '2025-11-02 12:10:00'),
(2, 'TRX-20251101001', 48000, 3, 50000, 2000, 'cash', 'completed', 'Pembukaan bulan', '2025-11-01 09:00:00', '2025-11-01 09:00:00'),
(3, 'TRX-20251101002', 35000, 2, 40000, 5000, 'cash', 'completed', NULL, '2025-11-01 14:30:00', '2025-11-01 14:30:00'),

-- Data bulan Oktober 2025 (untuk testing laporan bulanan)
(2, 'TRX-20251031001', 45000, 2, 50000, 5000, 'cash', 'completed', NULL, '2025-10-31 11:30:00', '2025-10-31 11:30:00'),
(3, 'TRX-20251031002', 38000, 2, 40000, 2000, 'digital', 'completed', NULL, '2025-10-31 15:20:00', '2025-10-31 15:20:00'),
(2, 'TRX-20251030001', 42000, 2, 45000, 3000, 'cash', 'completed', NULL, '2025-10-30 09:45:00', '2025-10-30 09:45:00'),
(3, 'TRX-20251030002', 37000, 2, 40000, 3000, 'cash', 'completed', NULL, '2025-10-30 13:15:00', '2025-10-30 13:15:00'),
(2, 'TRX-20251029001', 49000, 2, 50000, 1000, 'card', 'completed', NULL, '2025-10-29 10:20:00', '2025-10-29 10:20:00'),
(3, 'TRX-20251029002', 33000, 2, 35000, 2000, 'cash', 'completed', NULL, '2025-10-29 16:40:00', '2025-10-29 16:40:00'),

-- Data September 2025 (untuk testing laporan bulanan)
(2, 'TRX-20250930001', 41000, 2, 45000, 4000, 'cash', 'completed', NULL, '2025-09-30 12:15:00', '2025-09-30 12:15:00'),
(3, 'TRX-20250930002', 36000, 2, 40000, 4000, 'digital', 'completed', NULL, '2025-09-30 17:30:00', '2025-09-30 17:30:00'),
(2, 'TRX-20250929001', 44000, 2, 50000, 6000, 'cash', 'completed', NULL, '2025-09-29 08:20:00', '2025-09-29 08:20:00'),
(3, 'TRX-20250929002', 39000, 2, 40000, 1000, 'cash', 'completed', NULL, '2025-09-29 14:45:00', '2025-09-29 14:45:00');

-- Menambahkan transaction_items untuk setiap transaksi
-- Transaksi hari ini (19 November 2025)
INSERT INTO transaction_items (transaction_id, menu_id, menu_name, quantity, price, subtotal, created_at, updated_at) VALUES
-- TRX-20251119001 (43000)
(1, 1, 'Nasi Gudeg', 1, 25000, 25000, '2025-11-19 08:30:00', '2025-11-19 08:30:00'),
(1, 5, 'Es Teh Manis', 2, 5000, 10000, '2025-11-19 08:30:00', '2025-11-19 08:30:00'),
(1, 6, 'Es Jeruk', 1, 8000, 8000, '2025-11-19 08:30:00', '2025-11-19 08:30:00'),

-- TRX-20251119002 (28000)
(2, 2, 'Soto Ayam', 1, 20000, 20000, '2025-11-19 09:15:00', '2025-11-19 09:15:00'),
(2, 6, 'Es Jeruk', 1, 8000, 8000, '2025-11-19 09:15:00', '2025-11-19 09:15:00'),

-- TRX-20251119003 (35000)
(3, 3, 'Gado-Gado', 1, 18000, 18000, '2025-11-19 10:45:00', '2025-11-19 10:45:00'),
(3, 7, 'Kopi Hitam', 1, 10000, 10000, '2025-11-19 10:45:00', '2025-11-19 10:45:00'),
(3, 9, 'Kerupuk', 2, 3000, 6000, '2025-11-19 10:45:00', '2025-11-19 10:45:00'),

-- TRX-20251119004 (52000)
(4, 4, 'Bakso Malang', 2, 22000, 44000, '2025-11-19 12:20:00', '2025-11-19 12:20:00'),
(4, 6, 'Es Jeruk', 1, 8000, 8000, '2025-11-19 12:20:00', '2025-11-19 12:20:00'),

-- TRX-20251119005 (19000)
(5, 8, 'Jus Alpukat', 1, 15000, 15000, '2025-11-19 13:30:00', '2025-11-19 13:30:00'),
(5, 9, 'Kerupuk', 1, 3000, 3000, '2025-11-19 13:30:00', '2025-11-19 13:30:00'),

-- TRX-20251119006 (41000)
(6, 1, 'Nasi Gudeg', 1, 25000, 25000, '2025-11-19 15:10:00', '2025-11-19 15:10:00'),
(6, 8, 'Jus Alpukat', 1, 15000, 15000, '2025-11-19 15:10:00', '2025-11-19 15:10:00'),

-- Kemarin (18 November 2025)
-- TRX-20251118001 (38000)
(7, 2, 'Soto Ayam', 1, 20000, 20000, '2025-11-18 08:15:00', '2025-11-18 08:15:00'),
(7, 3, 'Gado-Gado', 1, 18000, 18000, '2025-11-18 08:15:00', '2025-11-18 08:15:00'),

-- TRX-20251118002 (25000)
(8, 1, 'Nasi Gudeg', 1, 25000, 25000, '2025-11-18 09:30:00', '2025-11-18 09:30:00'),

-- TRX-20251118003 (47000)
(9, 4, 'Bakso Malang', 2, 22000, 44000, '2025-11-18 11:45:00', '2025-11-18 11:45:00'),
(9, 9, 'Kerupuk', 1, 3000, 3000, '2025-11-18 11:45:00', '2025-11-18 11:45:00'),

-- TRX-20251118004 (32000)
(10, 1, 'Nasi Gudeg', 1, 25000, 25000, '2025-11-18 14:20:00', '2025-11-18 14:20:00'),
(10, 7, 'Kopi Hitam', 1, 7000, 7000, '2025-11-18 14:20:00', '2025-11-18 14:20:00'),

-- TRX-20251118005 (29000)
(11, 3, 'Gado-Gado', 1, 18000, 18000, '2025-11-18 16:10:00', '2025-11-18 16:10:00'),
(11, 5, 'Es Teh Manis', 2, 5000, 10000, '2025-11-18 16:10:00', '2025-11-18 16:10:00');

-- Update stock menu berdasarkan penjualan
UPDATE menus SET stock = stock - 10 WHERE id IN (1, 2, 3, 4); -- Menu utama
UPDATE menus SET stock = stock - 15 WHERE id IN (5, 6, 7, 8); -- Minuman
UPDATE menus SET stock = stock - 8 WHERE id IN (9, 10); -- Snack

-- Commit perubahan
COMMIT;
